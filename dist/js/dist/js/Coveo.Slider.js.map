{"version":3,"sources":["Slider.ts"],"names":["Slider","Slider.constructor","Slider.defaults","Slider.update","Slider.updateSliderColors","Slider.value","Slider.min","Slider.max","Slider.destroy","validateAndCreateElements"],"mappings":"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","file":"Coveo.Slider.js","sourcesContent":["/// <reference path=\"../typings/jquery/jquery.d.ts\" />\n/// <reference path=\"../typings/underscore/underscore.d.ts\" />\n/// <reference path=\"Slider.d.ts\" />\nvar SliderMethods = {\n    Destroy: 'destroy',\n    Update: 'update'\n};\n\nclass Slider {\n    private colors: Colors;\n    private options: SliderOptions;\n    private $el: JQuery;\n    private _uid: number;\n\n    static LowerDefaultColor = '#f57f03';\n    static UpperDefaultColor = '#dddddd';\n    static StyleElementClass = 'coveo-input-slider-style';\n    static InputElementClass = 'coveo-input-slider';\n    static DefaultValue = 50;\n\n    static _uid = 0;\n\n    constructor(options: SliderOptions) {\n        if (options.slider && _.isUndefined(options.min) && options.slider.attr('min')) {\n            options.min = parseFloat(options.slider.attr('min'));\n        }\n        if (options.slider && _.isUndefined(options.max) && options.slider.attr('max')) {\n            options.max = parseFloat(options.slider.attr('max'));\n        }\n\n        this.options = _.defaults(options, this.defaults());\n        this.$el = this.options.slider;\n        this._uid = ++Slider._uid;\n        this.$el.attr({\n            'data-uid': this._uid,\n            max: this.options.max,\n            min: this.options.min\n        });\n\n        this.$el.on('input change', () => this.update());\n    }\n\n    defaults() {\n        return {\n            colors: {lower: Slider.LowerDefaultColor, upper: Slider.UpperDefaultColor},\n            min: 0,\n            max: 100,\n            labels: [],\n            value: Slider.DefaultValue\n        };\n    }\n\n    update() {\n        var value = ((this.value - this.min) / (this.max - this.min)) * 100;\n        this.updateSliderColors(value);\n    }\n\n    private updateSliderColors(value: number) {\n        var styleElement = this.$el.prev('.' + Slider.StyleElementClass);\n        var colors = this.options.colors;\n        var gradient = `background: linear-gradient(to right, ${colors.lower} ${value}%, ${colors.upper} ${value}%);`;\n\n        var selector = `.coveo-input-slider[data-uid='${this._uid}']`;\n\n        var webkit = [`input[type=range]${selector}::-webkit-slider-runnable-track {`, gradient, '}'].join('');\n        var firefox = [`input[type=range]${selector}::-moz-range-track {`, gradient, '}'].join('');\n        var ie = [\n            `input[type=range]${selector}::-ms-fill-lower {`,\n            'background: ',\n            this.options.colors.lower,\n            '}',\n            `input[type=range]${selector}::-ms-fill-upper {`,\n            'background: ',\n            this.options.colors.upper,\n            '}'\n        ].join('');\n\n        styleElement.html([webkit, firefox, ie].join(''));\n    }\n\n    get value(): number { return parseFloat(this.$el.val()); }\n\n    set value(value: number) {\n        var minOfValueAndMax = Math.min(value, this.options.max);\n        var maxOfValueAndMin = Math.max(minOfValueAndMax, this.options.min);\n        this.$el.val(maxOfValueAndMin);\n    }\n\n    get min(): number {return parseFloat(this.$el.attr('min')); }\n\n    get max(): number {return parseFloat(this.$el.attr('max')); }\n\n    destroy(elem: JQuery) {\n        this.$el.prev('.' + Slider.StyleElementClass).remove();\n        this.$el.removeData('slider');\n        this.$el.removeAttr('data-uid');\n        this.$el.off('input change');\n\n        elem.removeData('slider');\n    }\n}\n\n+function ($) {\n    'use strict';\n\n    var createStyleElement = () => $('<style />', {type: 'text/css', class: Slider.StyleElementClass});\n    var createInputElement = (value: number) => $('<input />', {type: 'range', class: Slider.InputElementClass, value: value});\n\n    $.fn.slider = function (opts?: SliderOptions|number|string) {\n        var $this = $(this);\n        opts = opts || {slider: $this};\n        var slider: Slider = $this.data('slider');\n\n        if (slider && slider instanceof Slider) {\n            var slider: Slider = $this.data('slider');\n            if (_.isNumber(opts)) {\n                slider.value = <number>opts;\n                validateAndCreateElements($this, slider.value);\n                slider.update();\n            } else if (opts && !_.isUndefined((<SliderOptions>opts).value)) {\n                slider.value = (<SliderOptions>opts).value;\n                validateAndCreateElements($this, slider.value);\n                slider.update();\n            } else if (_.isString(opts)) {\n                validateAndCreateElements($this, slider.value);\n                switch (<string>opts) {\n                    case SliderMethods.Destroy:\n                        slider.destroy($this);\n                        break;\n                    case SliderMethods.Update:\n                        slider.update();\n                        break;\n                    default:\n                        break;\n                }\n            } else {\n                //no param. update\n                validateAndCreateElements($this, slider.value);\n                slider.update();\n            }\n        } else {\n            var sliderOptions = <SliderOptions>opts;\n\n            var elements = validateAndCreateElements($this, sliderOptions.value);\n            sliderOptions.slider = elements.input;\n\n            slider = new Slider(sliderOptions);\n            $this.data('slider', slider);\n        }\n\n        slider.update();\n\n        return $this;\n    };\n\n    function validateAndCreateElements($el: JQuery, value?: number) {\n        var style: JQuery;\n        var input: JQuery;\n        if ($el.is('input[type=\"range\"]')) {\n            input = $el;\n            style = $el.prev('style.' + Slider.StyleElementClass);\n            if (style.length == 0) {\n                style = createStyleElement();\n                $el.before(style);\n            }\n        } else {\n            //assume container\n            style = $el.children('style.' + Slider.StyleElementClass);\n            if (style.length == 0) {\n                style = createStyleElement();\n                $el.prepend(style);\n            }\n\n            input = $el.children('input[type=\"range\"].' + Slider.InputElementClass);\n            if (input.length == 0) {\n                input = createInputElement(value || Slider.DefaultValue);\n                $el.append(input);\n            }\n        }\n        return {\n            input: input,\n            style: style\n        };\n    }\n}(jQuery);\n"],"sourceRoot":"/source/"}