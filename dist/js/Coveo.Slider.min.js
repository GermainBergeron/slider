var CoveoSliderMethods={Destroy:"destroy",Disable:"disable",Enable:"enable",Update:"update"},Slider=function(){function e(t){var i=this;t.slider&&_.isUndefined(t.min)&&t.slider.attr("min")&&(t.min=parseFloat(t.slider.attr("min"))),t.slider&&_.isUndefined(t.max)&&t.slider.attr("max")&&(t.max=parseFloat(t.slider.attr("max"))),this.options=_.defaults(t,this.defaults(t.colors)),this.$el=t.slider,this._uid=++e._uid,this.$el.attr({"data-uid":this._uid,max:this.options.max,min:this.options.min,step:this.options.step}),this.$el.on("input",function(){return i.onInput()}),this.$el.on("change",function(){return i.onChange()}),this.$el.prop("disabled")&&this.disable(),this.options.onInit(this)}return e.prototype.onInput=function(){this.update(),this.options.onSlide(this)},e.prototype.onChange=function(){this.update(),this.options.onChange(this)},e.prototype.defaults=function(t){return{colors:_.defaults(t||{},{lower:e.LowerDefaultColor,upper:e.UpperDefaultColor}),min:0,max:100,step:1,labels:[],ticks:[],value:e.DefaultValue,thumbWidth:20,onInit:_.noop,onSlide:_.noop,onChange:_.noop,onDestroy:_.noop}},e.prototype.update=function(){var e=(this.value-this.min)/(this.max-this.min)*100;this.updateSliderColors(e),this.positionElements()},e.prototype.positionElements=function(){var t=this;if(this.options.labels&&this.options.labels.length){var i=this.$el.nextAll("."+e.LabelContainerClass);if(i&&i.length){var s=(this.max-this.min)/this.options.step;_.each(this.options.labels,function(n){var l=i.find("."+e.LabelClass+'[data-index="'+n.index+'"]');if(l&&l.length){var a=l.width()/i.width()*100/2,o=(n.index-t.options.min)/t.options.step/s;l.css({left:100*o-a+"%","margin-left":-1*o*t.options.thumbWidth+t.options.thumbWidth/2+"px"})}})}}if(this.options.ticks&&this.options.ticks.length){var i=this.$el.nextAll("."+e.TickContainerClass);if(i&&i.length){var s=(this.max-this.min)/this.options.step;_.each(this.options.ticks,function(n){var l=i.find("."+e.TickClass+'[data-index="'+n+'"]');if(l&&l.length){var a=(n-t.min)/t.options.step,o=a/s;l.css({left:100*o+"%","margin-left":-1*o*t.options.thumbWidth+"px",background:n<t.value?t.options.colors.lower:t.options.colors.upper})}})}}},e.prototype.updateSliderColors=function(t){var i=this.$el.prev("."+e.StyleClass),s=this.options.colors,n="background: linear-gradient(to right, "+s.lower+" "+t+"%, "+s.upper+" "+t+"%);",l="."+e.InputClass+"[data-uid='"+this._uid+"']",a=['input[type="range"]'+l+"::-webkit-slider-runnable-track {",n,"}"].join(""),o=['input[type="range"]'+l+"::-moz-range-track {",n,"}"].join(""),r=['input[type="range"]'+l+"::-ms-fill-lower {","background: ",this.options.colors.lower,"}",'input[type="range"]'+l+"::-ms-fill-upper {","background: ",this.options.colors.upper,"}"].join("");i.html([a,o,r].join(""))},Object.defineProperty(e.prototype,"value",{get:function(){return parseFloat(this.$el.val())},set:function(e){var t=Math.min(e,this.max),i=Math.max(t,this.min);this.$el.val(i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return parseFloat(this.$el.attr("min"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return parseFloat(this.$el.attr("max"))},enumerable:!0,configurable:!0}),e.prototype.disable=function(){this.$el.prop("disabled",!0),this.$el.css("opacity","0.8")},e.prototype.enable=function(){this.$el.prop("disabled",!1),this.$el.css("opacity","1")},e.prototype.destroy=function(t){this.$el.prev("."+e.StyleClass).remove(),this.$el.nextAll("."+e.TickContainerClass).remove(),this.$el.nextAll("."+e.LabelContainerClass).remove(),this.$el.removeData("slider"),this.$el.removeAttr("data-uid"),this.$el.off("input change"),t.removeData("slider"),this.options.onDestroy()},e.LowerDefaultColor="#f57f03",e.UpperDefaultColor="#dddddd",e.StyleClass="coveo-slider-style",e.InputClass="coveo-slider-input",e.LabelContainerClass="coveo-slider-labels",e.LabelClass="coveo-slider-label",e.TickContainerClass="coveo-slider-ticks",e.TickClass="coveo-slider-tick",e.DefaultValue=50,e._uid=0,e}();+function(e){"use strict";function t(e,t){var r,d;if(e.is('input[type="range"]')){if(d=e,d.prop("disabled",t.disabled===!0),r=e.prev("style."+Slider.StyleClass),0==r.length&&(r=i(),e.before(r)),t&&t.ticks){var p=e.nextAll("."+Slider.TickContainerClass),u=_.isBoolean(t.ticks)&&t.ticks?_.range(t.min||0,(t.max||100)+(t.step||1),t.step||1):t.ticks;t.ticks=u,u&&u.length&&(0==p.length&&(p=n()),o(p,u),e.after(p))}if(t&&t.labels){var h=e.nextAll("."+Slider.LabelContainerClass),c=_.isBoolean(t.labels)&&t.labels?_.range(t.min||0,(t.max||100)+(t.step||1),t.step||1):t.labels;c&&c.length&&(c=_.map(c,function(e){return _.isNumber(e)?{index:e}:e}),0==h.length&&(h=l()),a(h,c),e.after(h)),t.labels=c}}else{if(r=e.children("style."+Slider.StyleClass),0==r.length&&(r=i(),e.prepend(r)),d=e.children('input[type="range"].'+Slider.InputClass),0==d.length?(d=s(_.isUndefined(t.value)?Slider.DefaultValue:t.value,t&&t.disabled===!0),e.append(d)):_.isNumber(t.value)&&d.val(t.value),t&&t.ticks){var p=e.children("."+Slider.TickContainerClass),u=_.isBoolean(t.ticks)&&t.ticks?_.range(t.min||0,(t.max||100)+(t.step||1),t.step||1):t.ticks;t.ticks=u,u&&u.length&&(0==p.length&&(p=n()),o(p,u),e.append(p))}if(t&&t.labels){var h=e.children("."+Slider.LabelContainerClass),c=_.isBoolean(t.labels)&&t.labels?_.range(t.min||0,(t.max||100)+(t.step||1),t.step||1):t.labels;c&&c.length&&(c=_.map(c,function(e){return _.isNumber(e)?{index:e}:e}),0==h.length&&(h=l()),a(h,c),e.append(h)),t.labels=c}}return{input:d,style:r}}var i=function(){return e("<style />",{type:"text/css","class":Slider.StyleClass})},s=function(t,i){return e("<input />",{type:"range","class":Slider.InputClass,value:t}).prop("disabled",i)},n=function(){return e("<div />",{"class":Slider.TickContainerClass})},l=function(){return e("<div />",{"class":Slider.LabelContainerClass})},a=function(t,i){_.chain(i).sortBy(function(e){return e.index}).each(function(i){var s=e("<div />",{"class":Slider.LabelClass,text:i.label||i.index,"data-index":i.index});t.append(s)})},o=function(t,i){_.chain(i).sortBy(_.identity).each(function(i){var s=e("<div />",{"class":Slider.TickClass,"data-index":i});t.append(s)})};e.fn.slider=function(i){var s=e(this);i=i||{slider:s};var n=s.data("slider");if(_.isNumber(i)&&(i={value:i}),n&&n instanceof Slider){var n=s.data("slider");if(i&&!_.isUndefined(i.value))n.value=i.value,t(s,{value:n.value}),n.update();else if(_.isString(i))switch(t(s,n.value),i){case CoveoSliderMethods.Destroy:n.destroy(s);break;case CoveoSliderMethods.Disable:n.disable();break;case CoveoSliderMethods.Enable:n.enable();break;case CoveoSliderMethods.Update:n.update()}else t(s,{value:n.value}),n.update()}else if(!_.isString(i)&&!_.isNumber(i)){var l=i,a=t(s,l);l.slider=a.input,n=new Slider(l),s.data("slider",n)}return n&&n instanceof Slider&&n.update(),s}}(jQuery);